From: SGI KDB Development <kdb@oss.sgi.com>
Subject: kdb-v4.4-2.6.27-rc8-x86-1
References: FATE#303971
X-URL: ftp://oss.sgi.com/www/projects/kdb/download/v4.4/

The KDB x86 code.

Acked-by: Bernhard Walle <bwalle@suse.de>

Automatically created from "patches.suse/kdb-x86" by xen-port-patches.py

--- head-2009-10-12.orig/arch/x86/kdb/kdba_bt.c	2009-10-12 15:43:36.000000000 +0200
+++ head-2009-10-12/arch/x86/kdb/kdba_bt.c	2009-10-13 17:01:44.000000000 +0200
@@ -721,7 +721,7 @@ static const char *bb_spurious[] = {
 				/* relocate_kernel */
 	"relocate_new_kernel",
 #endif	/* CONFIG_KEXEC */
-#ifdef	CONFIG_XEN
+#ifdef	CONFIG_PARAVIRT_XEN
 				/* arch/i386/xen/xen-asm.S */
 	"xen_irq_enable_direct_end",
 	"xen_irq_disable_direct_end",
@@ -4873,7 +4873,7 @@ kdb_bb_all(int argc, const char **argv)
 #ifdef	CONFIG_MATH_EMULATION
 		   " CONFIG_MATH_EMULATION"
 #endif
-#ifdef	CONFIG_XEN
+#ifdef	CONFIG_PARAVIRT_XEN
 		   " CONFIG_XEN"
 #endif
 #ifdef	CONFIG_DEBUG_INFO
--- head-2009-10-12.orig/arch/x86/kdb/kdba_support.c	2009-10-12 11:47:00.000000000 +0200
+++ head-2009-10-12/arch/x86/kdb/kdba_support.c	2009-10-13 17:01:44.000000000 +0200
@@ -1528,7 +1528,7 @@ extern void halt_current_cpu(struct pt_r
 
 void kdba_kdump_shutdown_slave(struct pt_regs *regs)
 {
-#ifndef CONFIG_XEN
+#ifndef CONFIG_PARAVIRT_XEN
 	halt_current_cpu(regs);
 #endif /* CONFIG_XEN */
 }
